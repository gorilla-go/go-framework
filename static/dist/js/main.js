function setupMobileMenu(){let t=document.querySelector(".menu-toggle"),a=document.querySelector(".navbar-nav");t&&a&&(t.addEventListener("click",function(){a.classList.toggle("active"),t.querySelectorAll("span").forEach(e=>e.classList.toggle("active"))}),a.querySelectorAll("a").forEach(e=>{e.addEventListener("click",function(){window.innerWidth<=768&&(a.classList.remove("active"),t.querySelectorAll("span").forEach(e=>e.classList.remove("active")))})}))}function setupFeatureCards(){document.querySelectorAll(".feature-card").forEach((e,t)=>{e.style.setProperty("--animation-order",t),e.addEventListener("mouseenter",function(){this.style.transform="translateY(-10px)"}),e.addEventListener("mouseleave",function(){this.style.transform=""})})}function setupSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){var t=this.getAttribute("href");"#"!==t&&(t=document.querySelector(t))&&(e.preventDefault(),t.scrollIntoView({behavior:"smooth",block:"start"}))})})}function escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function escapeHTML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function highlightCodeBlocks(){document.querySelectorAll(".code-block").forEach(t=>{if(!t.dataset.processed){var c=t.dataset.lang||"text",l=t.textContent||t.innerText;try{let e=l.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&#39;/g,"'"),a=[],s=0;var r=simpleTokenize(e=e.replace(/{{[\s\S]*?}}/g,e=>{var t=`__TEMPLATE_${s++}__`;return a.push({placeholder:t,content:e}),t}));let n="";for(let t of r){var o=escapeHTML(t.value),p=a.find(e=>e.placeholder===t.value);if(p)n+=`<span class="code-template">${escapeHTML(p.content)}</span>`;else switch(t.type){case"keyword":n+=`<span class="code-keyword">${o}</span>`;break;case"type":n+=`<span class="code-type">${o}</span>`;break;case"stdlib":n+=`<span class="code-stdlib">${o}</span>`;break;case"string":n+=`<span class="code-string">${o}</span>`;break;case"comment":n+=`<span class="code-comment">${o}</span>`;break;case"number":n+=`<span class="code-number">${o}</span>`;break;case"function":n+=`<span class="code-function">${o}</span>`;break;case"punctuation":n+=`<span class="code-punctuation">${o}</span>`;break;case"interface":n+=`<span class="code-interface">${o}</span>`;break;case"variable":n+=`<span class="code-variable">${o}</span>`;break;default:n+=o}}var i=n.split("\n").map((e,t)=>`<span class="code-line"><span class="code-line-number">${t+1}</span><span class="code-line-content">${e||" "}</span></span>`).join("\n"),u="text"!==c?`<div class="code-lang-label">${c.toUpperCase()}</div>`:"";t.innerHTML=u+`<pre class="code-highlighted">${i}</pre>`,t.dataset.processed="true",t.classList.add("lang-"+c)}catch(e){console.error("代码高亮处理错误:",e);r=escapeHTML(l);t.innerHTML=`<pre>${r}</pre>`,t.dataset.processed="true"}}})}function simpleTokenize(t){var a=[];let s=0;var n=["break","default","func","interface","select","case","defer","go","map","struct","chan","else","goto","package","switch","const","fallthrough","if","range","type","continue","for","import","return","var","In","GET","POST","PUT","DELETE"],c=["fmt","http","gin","io","os","time","strings","strconv","math","context","errors","fx","sync","log","database/sql","response","middleware","config","template"],l=["string","int","bool","map","interface","Context"];const r=/^\s+/,o=/^\/\/.*$/,p=/^"(?:\\.|[^"\\])*"/,i=/^\d+(\.\d+)?/,u=/^[a-zA-Z_]\w*/,d=/^[{}[\](),.;:=<>+\-*/%&|^!~?]/;for(;s<t.length;){let e=!1;var h=t.slice(s).match(r);h?(a.push({type:"whitespace",value:h[0]}),s+=h[0].length,e=!0):(h=t.slice(s).match(o))?(a.push({type:"comment",value:h[0]}),s+=h[0].length,e=!0):(h=t.slice(s).match(p))?(a.push({type:"string",value:h[0]}),s+=h[0].length,e=!0):(h=t.slice(s).match(i))?(a.push({type:"number",value:h[0]}),s+=h[0].length,e=!0):(h=t.slice(s).match(u))?(h=h[0],n.includes(h)?a.push({type:"keyword",value:h}):c.includes(h)?a.push({type:"stdlib",value:h}):l.includes(h)||/^[A-Z]/.test(h)?a.push({type:"type",value:h}):s+h.length<t.length&&"("===t[s+h.length]?a.push({type:"function",value:h}):a.push({type:"identifier",value:h}),s+=h.length,e=!0):(h=t.slice(s).match(d))?(a.push({type:"punctuation",value:h[0]}),s+=h[0].length,e=!0):e||(a.push({type:"text",value:t[s]}),s++)}return a}document.addEventListener("DOMContentLoaded",function(){setupMobileMenu(),setupFeatureCards(),setupSmoothScrolling(),highlightCodeBlocks()});